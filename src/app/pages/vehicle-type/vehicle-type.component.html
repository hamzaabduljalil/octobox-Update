<div class="card my-3 px-3">
  <div class="flex flex-row w-full gap-3 mb-3">
    <p-button (click)="openDialog()" pRipple ButtonIconPosition="right">
      <ng-template pTemplate="content">
        <div class="flex items-center gap-2">
          <span class="pi pi-plus"></span>
          <span class="md:block hidden font-semibold capitalize">
            {{ "Add" | translate }} {{ count() }}
          </span>
        </div>
      </ng-template>
    </p-button>
  </div>

  <p-table
    [columns]="cols"
    [dir]="currentLang() === 'ar' ? 'rtl' : 'ltr'"
    [value]="objs()"
    [tableStyle]="{ 'min-width': '50rem' }"
  >
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th
          class="{{ currentLang() === 'en' ? 'text-left' : 'text-right' }}"
          *ngFor="let col of columns"
        >
          {{ col.header | translate }}
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr>
        @for(col of columns; track $index){
        <td class="{{ currentLang() === 'en' ? 'text-left' : 'text-right' }}">
          <ng-container *ngIf="col.field !== 'processes'; else actionsTemplate">
            {{
              currentLang() === "en"
                ? rowData[col.field].en
                : rowData[col.field].ar
            }}
          </ng-container>
          <ng-template #actionsTemplate>
            <div class="text-end w-max" dir="ltr">
              <p-buttonGroup>
                <p-button
                  (onClick)="delete(rowData, $index)"
                  [outlined]="true"
                  [label]="'Delete' | translate"
                ></p-button>
                <p-button
                  (onClick)="openDialog(rowData)"
                  [outlined]="true"
                  [label]="'Edit' | translate"
                ></p-button>
              </p-buttonGroup>
            </div>
          </ng-template>
        </td>
        }
      </tr>
    </ng-template>
  </p-table>

  <p-paginator
    (onPageChange)="onPageChange($event)"
    [first]="0"
    [rows]="paginationState.getValue().rows!"
    [totalRecords]="count()"
    [rowsPerPageOptions]="[25, 50, 100]"
    [appendTo]="'body'"
  ></p-paginator>
</div>
